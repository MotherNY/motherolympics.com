
$(document).ready(function(){function n(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}log("Ready..."),window.SUB={position:null,hasTouch:!0};if(!("ontouchstart"in window)||window.DocumentTouch&&document instanceof DocumentTouch)document.documentElement.className="no-touch",SUB.hasTouch=!1;var e=$("#contact-form"),t=$("#connect-button");if(e.length){var r=function(r){t.attr("disabled",!0).addClass("opacity75"),$(".error").removeClass("error");var i=$('input[type="email"]'),s=$('input[type="name"]'),o=$('textarea[name="message"]');return i.val(n(i.val())),s.val(n(s.val())),o.val(n(o.val())),s.val().length<2?(log("Bad name."),s.val("").addClass("error").focus(),t.removeAttr("disabled").removeClass("opacity75"),!1):/(.+)@(.+){2,}\.(.+){2,}/.test(i.val())?($.post("/connect",e.serialize(),function(n){var r=typeof n=="string"?JSON.parse(n):n;log(r),e.find("input, textarea").val(""),t.removeAttr("disabled").removeClass("opacity75").blur();var i=r.error?"failed-submission":"successful-submission";$("#contact-header").find("h3").after('<p class="'+i+'">'+r.message+"</p>"),setTimeout(function(){$("#contact-header").find("p").remove()},5e3)}),!1):(log("Bad email."),i.val("").addClass("error").focus(),t.removeAttr("disabled").removeClass("opacity75"),!1)};t.on("click",function(e){return r(e),e.preventDefault(),!1}),e.on("submit",function(e){return r(e),e.preventDefault(),!1})}})